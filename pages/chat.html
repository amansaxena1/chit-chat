<!DOCTYPE html>
<html lang="en">
<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Chit-Chat</title>
     <link rel="stylesheet" href="../css/chat.css">
     <link href="https://fonts.googleapis.com/css2?family=Bubblegum+Sans&display=swap" rel="stylesheet">
</head>
<body>
     <nav>
          <img class="logo" src="icon.png" alt="">
     </nav>
     <div class="loginBox">
         <h1>
               <span>CHIT CHAT</span>
          </h1>
          <form>
               <input type="text" id="chatname" placeholder="Enter The Chat Name">
               <div class="a">
                    <a id="enterchat">
                         <b>NEXT</b>
                    </a>
                    <p id="errormsg">-OR-</p>
                    <a href="newchat.html">
                         <b>CREATE NEW CHAT</b>
                    </a> 
               </div>
          </form>
     </div>
     <!----------------------------------connection to firebase----------------------------------->
     <script src="https://www.gstatic.com/firebasejs/7.21.1/firebase-app.js"></script>
     <script src="https://www.gstatic.com/firebasejs/7.21.1/firebase-database.js"></script>
     <script src="https://www.gstatic.com/firebasejs/7.21.1/firebase-analytics.js"></script>
     <script>
       var firebaseConfig = {
         apiKey: "AIzaSyDUR1YtiVv5ODcd2P0ZhgNb98pQ1giBVJ0",
         authDomain: "chit-chat-14af6.firebaseapp.com",
         databaseURL: "https://chit-chat-14af6.firebaseio.com",
         projectId: "chit-chat-14af6",
         storageBucket: "chit-chat-14af6.appspot.com",
         messagingSenderId: "232361079089",
         appId: "1:232361079089:web:5be801bc6b78088aed0010",
         measurementId: "G-WMSZ8J3C68"
       };
       firebase.initializeApp(firebaseConfig);
       firebase.analytics();
     </script>
     <!--------------------------------end of connection to firebase--------------------------------->
     <!-----------------------------------passing name of user--------------------------------------->
     <script>
          var enterchat = document.getElementById('enterchat');
          var chatnames = document.getElementById('chatname');

          enterchat.addEventListener('click', (e) => {
            firebase.database().ref("messages").child(chatnames.value).on("value", function (snapshot) {
                if(snapshot.val().chatname == chatnames.value){
                  window.localStorage.setItem('chatsname',chatname.value);
                  window.location.href='messages.html';
                }
                else{
                  document.getElementById("errormsg").innerHTML='!!! CHAT NOT FOUND !!!'
                }
              });
        return false;
        });
          
     </script>
</body>
</html>